---
bibliography: example.bib
---

# Authoring {#sec-authoring}

When we say "authoring" we mean the process of adding content to a Quarto document---literally, the things you write in a `.qmd` file.
You'll start by reviewing the three basic components of a Quarto document: the document header, code cells and markdown text.

The rest of the chapter then focuses on the specific markdown syntax that Quarto uses to create rich documents.
Our goal is to give you a good overview of breadth of Quarto's authoring features, while delaying many of the details to later chapters of the book.
We also focus on syntax that is broadly supported across multiple output formats and cover specific format features where relevant in @sec-output-formats.

We suggest reading through the chapter in its entirety on your first reading, and then referring back to specific sections as needed when authoring your own documents.


## Document header

Top of the document inside `---`. 
Basic: `title`, `author`, `format`.
Sets document metadata and options.
Refer to Projects chapter to reduce duplication, YAML chapter for more details on syntax.

## Code cells

Executable code cells are blocks of code that can be run to produce output that is included in your document.
Inside `` ```{LANGUAGE} `` and `` ``` ``.
Often have code cell options inside. @sec-execution-options
`echo`, `include`.

If you want to include code that is highlighted, and displayed, but not executable, use a code block @sec-code-blocks.

Remind of distinction between interactive execution and execution as part of rendering.

Only put code, or code comments inside.

Generally, only one language per document. (depending on engine, might be able to mix code cell languages, e.g. knitr, r and python vis reticulate).

::: panel-tabset
### R

{{< embed notebooks/authoring-r.qmd#add echo=true >}}

### Python

{{< embed notebooks/authoring-python.qmd#add echo=true >}}

:::

::: panel-tabset

### R

{{< embed notebooks/authoring-r.qmd#plot echo=true >}}

### Python

{{< embed notebooks/authoring-python.qmd#plot echo=true >}}

:::

Can be used to generate images/figures, tables, raw markdown content.
Can be nested inside lists, callouts, fenced divs, ...

## Markdown text

Everything that isn't the document header, or an executable code cell, is interpreted as Quarto markdown.
Quarto markdown originally built on top of Pandoc markdown with extensions, so much of Pandoc markdown works.
Now, Quarto has its own markdown parser, so some differences.
The rest of this chapter outlines the most important pieces of Quarto markdown syntax.

## Sections

Use markdown headings to structure your document into sections and subsections.
Markdown headings are created by prefixing text with one or more `#` characters, 
followed by a space, and the heading title:

```markdown
## Section

### Subsection

#### Subsubsection

```

Quarto supports six levels of headings, from level-1 (`#`) to level-6 (`######`).
The value of `title` in the document header usually becomes the level-1 heading of the document,
which is why sections usually start with level-2 headings.

You can attach attributes to headings by adding curly braces `{}` after the heading text.
For example, you might add an identifier to a section heading to enable cross-referencing:

```markdown
## Section Title {#sec-section-title}
```    

Or you might add a class, which are often used to control the behavior of sections, like `.unlisted` to exclude a section from the table of contents:

```markdown
## Section Title {#sec-section-title .unlisted}
```

## Paragraphs

Create paragraphs by separating text with blank lines:

```markdown
This is the first paragraph. It can span multiple lines 
in your source document.

This is a second paragraph, separated by a blank line.
```

Line breaks within a paragraph are typically ignored, which means you can wrap your text across multiple lines without affecting the final rendered output.

## Text

Beyond plain text, @tbl-inline-text-elements summarizes the most common things you want to put inside a paragraph or heading: formatted text, links, cross-references, citations, math and footnotes.

These elements are called **inline text elements**, because they are used *inside* block-level elements like paragraphs and headings.
You can also use them inside many of the other block-level elements discussed in this chapter like as list items, inside tables, and inside callouts.

::: {#tbl-inline-text-elements}

::: {.list-table header-rows=1 widths='1,2,1' aligns=l,l,l } 


* - Element
  - Output
  - Markdown Syntax

* - []{rowspan=7} **Text formatting**
  - *italics*, **bold**, ***bold italics***
  - 

    ``` markdown
    *italics*, **bold**, ***bold italics***
    ```

* - superscript^2^ / subscript~2~
  - 

    ``` markdown
    superscript^2^ / subscript~2~
    ```

* - ~~strikethrough~~
  - 

    ``` markdown
    ~~strikethrough~~
    ```

* - `verbatim code`
  - 

    ``` markdown
    `verbatim code`
    ```

* - [This text is smallcaps]{.smallcaps}
  - 

    ``` markdown
    [This text is smallcaps]{.smallcaps}
    ```

* - [This text is underlined]{.underline}
  - 

    ``` markdown
    [This text is underlined]{.underline}
    ```

* - [This text is highlighted]{.mark}
  - 
    
    ``` markdown
    [This text is highlighted]{.mark}
    ```

* - []{rowspan=3} **Links**
  - <https://quarto.org>
  -

    ``` markdown
    <https://quarto.org>
    ```

* - [Quarto website](https://quarto.org)
  -

    ``` markdown
    [Quarto website](https://quarto.org)
    ```  

* - [Links section on this page](#links)
  - 

    ``` markdown
    [Links section on this page](#links)
    ```

* - []{rowspan=2} **Cross-references** See @sec-crossreferences
  - @fig-elephant
  -

    ``` markdown
    @fig-elephant
    ```

* - @sec-authoring
  -

    ``` markdown
    @sec-authoring
    ```

* - []{rowspan=3} **Citations** @sec-citations
  - @knuth1984 shows ...
  -

    ``` markdown
    @knuth1984 shows ...
    ```

* - ... [@knuth1984]
  -

    ``` markdown
    ... [@knuth1984]
    ```

* - [@knuth1984; @wickham2023]
  - 

    ``` markdown
    [@knuth1984; @wickham2023]
    ```

* - **Math** @sec-equations
  - Inline math: $E = mc^{2}$
  - 

    ``` markdown
    Inline math: $E = mc^{2}$
    ```

* - **Footnotes** @sec-footnotes
  - Here is an inline note.^[Note content]
  - 

    ``` markdown
    Here is an inline note.^[Note content]
    ```

:::


Common syntax for inline text elements in Quarto markdown. TODO: Element column entries will span rows.
:::


## Lists

You can create an unordered list by starting each line with `-` (or `*` or `+`),
followed by a space, ensuring there is a blank line before the list:

```markdown
My list:

- First item
- Second item
- Third item
```

Leaving no blank lines between items will result in a compact list, while leaving a blank line between items will create a loose list with more vertical spacing.

Use numbers followed by a period to create an ordered list:

```markdown
My numbered list:

1. First item
2. Second item
3. Third item
```

The actual numbers you use don't matter---Quarto will renumber the list automatically. This means you can use `1.` for every item if you prefer.

List items can contain other block elements like paragraphs, code blocks, or even other lists. 
Subsequent elements should be indented to line up with the first non-space content after the list marker:

````markdown
* First item with multiple paragraphs.

  This is the second paragraph, indented to align with
  the first paragraph.

* An item with a sublist:

  1. Subitem one
  2. Subitem two

* Third item

  ```{.python}
  # This is a code block inside a list item
  ```
````

Quarto also supports task lists and definition lists. 
See the [Quarto documentation](https://quarto.org/docs/authoring/markdown-basics.html#lists) for details on these specialized list types.

## Code blocks {#sec-code-blocks}

`` ```LAUGUAGE ``, or `` ```{.LANGUAGE} `` for syntax highlighting without execution.
In this book, we use the later, allows easy addition of attributes.

## Tables {#sec-markdown-tables}

The simplest way to add a table to a Quarto document is to create a **markdown pipe table**, however cells in a markdown pipe table cannot contain block content like multiple paragraphs, code cells, or lists.
To have cells with complicated cell contents, you can use an alternative syntax called **list tables**.
You can also use **HTML table syntax**, regardless of your target format, to create tables in Quarto documents.
You won't usually write HTML syntax by hand, but it is a common output from computational packages that create tables.

### Markdown pipe tables

The simplest syntax for a table in Quarto markdown is known as the **pipe table**, named because columns are separated by the pipe (`|`) character. 
A pipe table consists of column headers, a separator row of dashes (`-`) and pipes (`|`), and data rows with pipe-separated cells.

@fig-markdown-table gives an example of a pipe table, along with its rendered output.
The line after the table, starting with `:`, is optional, and specifies the caption and any attributes for the table (inside curly braces `{}`).
For example, the table is given the ID `#tbl-perf` so it is numbered and can be cross-referenced.

::: {#fig-markdown-table}
::: {}
````markdown
{{< include _examples/authoring/tables/markdown-table.qmd >}}
````
::: 

::: {}
![](images/authoring-tbl-perf.png){fig-alt="Rendered markdown output shows a table titled 'Table 1: Training Performance', with three columns: 'Model', 'Accuracy', and 'Time'. The table has four rows."}
:::

Markdown syntax and rendered output for a markdown pipe table

:::


### List tables

TODO: Revisit this once the `list-tables` extension is bundled with Quarto. 

List tables use markdown list syntax to create tables where cells can contain multiple paragraphs, code cells, or lists.
List tables need to be wrapped in a fenced div with the class `list-table`.
Inside the div, each row is represented as list item, with each cell as an subitem.

For example, to create the same table content as @fig-markdown-table using a list table, you would include the following in your document:

````markdown
{{< include _examples/authoring/tables/list-table.qmd >}}
````

To add a caption and attributes nest it inside another fenced div with a label that starts with `tbl-` and whose final line is the caption:

````markdown
{{< include _examples/authoring/tables/list-table-caption.qmd >}}
````

To include more complicated content in cells, like code blocks or formulas, include them as you would in normal markdown, but maintain indentation for the list structure, and the required white space for the content type:

````markdown
{{< include _examples/authoring/tables/list-table-complicated.qmd >}}
````

### HTML tables

You can also use HTML to create tables in Quarto documents, regardless of your target format.
HTML tables aren't usually constructed by hand, but are often generated by code cells or copied from other tools.

As an example, to generate the same table as @fig-markdown-table with HTML, you could include the following in your document:

````markdown
{{< include _examples/authoring/tables/html-table.qmd >}}
````

### From a code cell

When the output from an executable code cell is a markdown or HTML table, 
it will be included in your Quarto document.

To add an identifier and caption to the table use the code cell options `label` and `tbl-cap` respectively:

````markdown
```{{LANGUAGE}}
#| label: tbl-example
#| tbl-cap: "Caption"

# Code that generates a markdown or HTML table
```
````

## Images and figures {#sec-markdown-figures}

Refer to @sec-figures for more details on positioning, layout, cross-references, and other advanced figure features.
Quarto uses the term figure to refer to any image, numbered or not, included in a document.
You may be more used to using the term figure to refer to an image with a numbered caption---Quarto calls this a cross-referenceable figure. 

### From a file

To include an image file in markdown you use the following syntax:

```markdown
![](path/to/image.png)
```

Where the path to the image is a path relative to the current document.

::: {.callout-tip}

## Project relative paths 

If you preface the path with `/`, it is interpreted as a path relative to the project root. 
You'll learn more about project structure in [Projects](#sec-projects).

:::

You can add a caption inside the square brackets, an identifier inside curly braces after the image path, and alternative text for accessibility in a `fig-alt` attribute:

```markdown
![Caption](path/to/image.png){#fig-quarto fig-alt="Alternative text"}
```

If your identifier starts with `fig-`, the image will be a cross-referenceable figure, numbered, and can be referenced using the `@` syntax.

### From a code cell

If the output from an executable code cell is an image, it will be automatically included in your document.
To add an identifier, caption, or alternative text use the code cell options `label`, `fig-cap`, and `fig-alt` respectively:

````markdown
```{{LANGUAGE}}
#| label: fig-quarto
#| fig-cap: "Caption"
#| fig-alt: "Alternative text"

# Code that generates a plot
```
````

## Equations {#sec-equations}

Use TeX math. Describe what inline and display mean. 
Adding numbering and cross-reference.
Inline: `$ ... $`
Display: `$$ ... $$` or `\[ ... \]`

Use `$` delimiters for inline math and `$$` delimiters for display math. For example:

+---------------------------+-------------------------+
| Markdown Syntax           | Output                  |
+===========================+=========================+
| ``` markdown              |                         |
| inline math: $E = mc^{2}$ | inline math: $E=mc^{2}$ |
| ```                       |                         |
+---------------------------+-------------------------+
| ``` markdown              |                         |
| display math:             | display math:           |
|                           |                         |
| $$E = mc^{2}$$            | $$E = mc^{2}$$          |
| ```                       |                         |
+---------------------------+-------------------------+

How are they processed. 
LaTeX, HTML, Word

## Cross-references {#sec-crossreferences}

General process:

1. Add label
2. Refer using `@label`

Give table of common examples: `fig`, `tbl`,  `lst`, `sec`, `eq`,, `callout`, `thm`, 

Refer to Quarto docs for more details.

![](){#fig-elephant}

### Reserved Prefixes 

Unless you are creating a cross-reference, avoid using the reserved cross-reference prefixes for code cell labels (e.g. set using the `label` code cell option) and element IDs (set using a `#` in an attribute). 
 
The reserved prefixes are: `fig`, `tbl`, `lst`, `tip`, `nte`, `wrn`, `imp`, `cau`, `thm`, `lem`, `cor`, `prp`, `cnj`, `def`, `exm`, `exr`, `sol`, `rem`, `alg`, `eq`, `sec`.

Also avoid using underscores (`_`) in labels and IDs as this can cause problems when rendering to PDF with LaTeX.

Include syntax variations like `[Fig @fig-elephant]`, `[-@fig-elephant]`, `[@fig-elephant; @fig-panther]`.

## Citations {#sec-citations}

Quarto will use Pandoc to automatically generate citations and a bibliography in a number of styles. To use this capability, you will need:

-   A quarto document formatted with citations (see [Citation Markdown](#sec-citations)).

-   A bibliographic data source, for example a BibLaTeX (`.bib`) or BibTeX (`.bibtex`) file.

-   Optionally, a `CSL` file which specifies the formatting to use when generating the citations and bibliography (when not using `natbib` or `biblatex` to generate the bibliography).

::: {.callout-note}

When using `format: typst`, by default citation processing is handled by Typst, not Pandoc. See the [Typst](#typst) section below for more details.

::: 

Quarto supports bibliography files in a wide variety of formats including BibLaTeX and CSL. Add a bibliography to your document using the `bibliography` YAML metadata field. For example:

``` yaml
---
title: "My Document"
bibliography: references.bib
---
```

:::{.list-table header-cols=1}

- - Markdown Syntax
  - Output

- -

    ``` markdown
    @knuth1984 shows ...
    ```
  - @knuth1984 shows ...

- -

    ``` markdown
    ... [@knuth1984]
    ```
  - ... [@knuth1984]

- - 

    ``` markdown
    As Knuth [-@knuth1984] shows ...
    ```
  - As Knuth [-@knuth1984] shows ...

- - 

    ``` markdown
    [@knuth1984; @wickham2023]
    ```
  - [@knuth1984; @wickham2023]

:::


The appearance of the citations both inline and in the bibliography depends on the citation style as defined in a CSL file.
By default, Quarto use the [Chicago Manual of Style](https://chicagomanualofstyle.org/) author-date format, but you can provide a custom CSL file using the `csl` option field in your document header, for example:

``` yaml
---
title: "My Document"
bibliography: references.bib
csl: nature.csl
---
```

::: {#fig-references-section}

::: {.border .p-3 style="text-align: left;"}
## References {.unnumbered .unlisted}

::: {#refs}
:::
::: 

Automatically generated references section
::: 

REad more in Quarto docs.

## Footnotes {#sec-footnotes}

Pandoc supports numbering and formatting footnotes using the following syntax:

``` markdown
Here is a footnote reference,[^1] and another.[^longnote]

[^1]: Here is the footnote.

[^longnote]: Here's one with multiple blocks.

    Subsequent paragraphs are indented to show that they
belong to the previous footnote.

        { some.code }

    The whole paragraph can be indented, or just the first
    line.  In this way, multi-paragraph footnotes work like
    multi-paragraph list items.

This paragraph won't be part of the note, because it
isn't indented.
```

The above syntax generates the following output:

:::{.border .p-3}
Here is a footnote reference,[^1] and another.[^2]

This paragraph won't be part of the note, because it isn't indented.
:::

In addition, you can also write single paragraph footnotes inline using the following syntax:

``` markdown
Here is an inline note.^[Inlines notes are easier to write,
since you don't have to pick an identifier and move down to
type the note.]
```

This syntax generates the following output:

::: {.border .p-3}
Here is an inline note.[^3]
:::

## Fenced divs {#sec-fenced-divs}

Although the term *Div* originates from the `<div>` tag in HTML, Quarto uses this term to refer to a markdown syntax for creating block-level regions of content that can have attributes like classes and identifiers.

For example, callout blocks (@sec-callouts) are specified using the div syntax, as are panel layouts, and positioning (@sec-layout).

A fenced div starts with at least three consecutive colons and optionally some attributes inside curly braces. 
The div ends with another line containing a string of at least three consecutive colons. 
The div should be separated by blank lines from preceding and following blocks. 

For example, here we add the "border" class to a region of content using a div (`:::`):

``` markdown
::: {.border}
This content can be styled with a border
:::
```

Divs may also be nested. For example

``` markdown
::::: {#special .sidebar}

::: {.warning}
Here is a warning.
:::

More content.
:::::
```

Fences without attributes are always closing fences.
In practice, this means you sometimes add empty attributes.


## Callouts

``` markdown
:::{.callout-note}
Note that there are five types of callouts, including: 
`note`, `tip`, `warning`, `caution`, and `important`.
:::
```

## Layout {#sec-layout}

Using divs with classes and/or attributes to create layouts.

`layout-*` attributes to arrange items 

`.column` classes to use parts of the page https://quarto.org/docs/authoring/article-layout.html#available-columns

## Raw blocks 

A way to include raw syntax for specific output formats.

````markdown
```{=html}

```
````

See examples in documents chapter.

## Includes {#sec-includes}

A way to split your document into multiple files, and include them.
Reduce duplication.

`{{< include path/to/file >}}`

Can use inside code cells

Name starting with `_` (more important in projects)

Don't usually include document headers.

## Attributes

Attributes can be added to many markdown elements to control their behavior or appearance.
Attributes are added inside curly braces `{}` after the element.
You've seen some examples.

IDs are unique and start with `#`
Classes start with `.`
Key-value pairs use `key='value'` syntax.
Order matters, IDs first, then classes, then key-value pairs.

## Other features

* Diagrams
* Other shortcodes: videos, placeholder text, `meta`, `var`
* Keyboard shortcuts

