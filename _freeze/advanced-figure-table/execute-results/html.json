{
  "hash": "36d6646950e67eb7bf58bcc123c145e3",
  "result": {
    "engine": "knitr",
    "markdown": "---\necho: false\n---\n\n# Advanced figures and tables {#sec-adv-figures-and-tables}\n\n\n\n## Overview\n\nRegardless of where figures and tables are coming from.\n\nAdvanced layout:\n  - Layout: `layout` code cell options, `layout` attribute \n  - Cross-references\n  - Captions\n\nPrefer longer, more explicit, and more general syntax, over more succinct but less general.\n\n## Generalizing the examples in this chapter\n\nWe'll use markdown examples.\nAnywhere you see a markdown figure:\n  - substitute with computational figure.\n  - substitute with table \n\n\n## Syntax Variations\n\n@fig-tbl-compare and @fig-fig-compare compare the syntax for non-computational and computational tables and figures using placeholders (in uppercase) for the content.\n\n::: {#fig-tbl-compare}\n\n:::{}\n```{.markdown}\nMARKDOWN TABLE\n\n: CAPTION {#LABEL}\n```\n\nMarkdown table\n\n:::\n\n:::{}\n````{.markdown}\n```{{LANGUAGE}}\n#| label: LABEL\n#| tbl-cap: CAPTION\n\n# CODE\n```\n````\n\nComputational table\n:::\n\nA comparison of the syntax for a table created with markdown, and a table created in a code cell. TODO: turn this into a diagram so we can color code the same info\n\n::: \n\n::: {#fig-fig-compare}\n\n:::{}\n```{.markdown}\n![CAPTION](PATH){#LABEL fig-alt=\"ALT TEXT\"}\n```\n\nMarkdown figure\n:::\n\n:::{}\n````{.markdown}\n```{{LANGUAGE}}\n#| label: LABEL\n#| fig-cap: CAPTION\n#| fig-alt: ALT TEXT\n\n# CODE\n```\n````\n\nComputational figure\n\n:::\n\nA comparison of the syntax for a figure created with markdown, and a figure created in a code cell.  TODO: turn this into a diagram so we can color code the same info\n\n::: \n\nAs a concrete example, consider the non-computational table in @lst-markdown-table.\n\n:::{#lst-markdown-table}\n```{.markdown .code-overflow-wrap}\n| species    | n   |\n|------------|-----|\n| Adelie     | 152 |\n| Chinstrap  | 68  |\n| Gentoo     | 124 |\n\n: Number of penguins sampled from each species in the Palmer Archipelago {#tbl-species-count}\n```\n\nMarkdown to produce a captioned and numbered table\n:::\n\nThis table could have instead been produced by an executable code cell, as shown in @fig-tables.\n\n::: {#fig-tables}\n\n::: {.panel-tabset group=\"language\"}\n\n## R\n\n````{.markdown}\n```{{r}}\n#| label: tbl-species-count\n#| tbl-cap: \"Number of penguins sampled from each species in the Palmer Archipelago\"\n\npenguins |>\n  count(species) |>\n  gt()\n\n```\n````\n\n## Python\n\n````{.markdown}\n```{{python}}\n#| label: tbl-species-count\n#| tbl-cap: \"Number of penguins sampled from each species in the Palmer Archipelago\"\n\n(\n  pl.DataFrame(penguins)\n .group_by('species')\n .len()\n .pipe(GT)\n)\n\n```\n````\n\n:::\n\nBasic table chunk options used for a computational table. Compare to @lst-markdown-table\n\n:::\n\nWhen rendered the result is shown in @fig-basic-cell-options-table.\nNotice the caption is prefaced by \"Table 1:\" --- this is because the label started with `tbl-` which signals to Quarto this is a cross-referenceable table. \nYou'll learn more about cross-references in @sec-figtab-crossrefs.\n\n![Example output when @fig-tables is rendered](images/figure-table-basic-cell-options-table.png){#fig-basic-cell-options-table fig-alt=\"\"}\n\n\nSimilarly, @lst-markdown-figure shows a non-computational figure, that could instead be produced using the code cells shown in @fig-figures.\n\n::: {#lst-markdown-figure}\n\n```{.markdown .code-overflow-wrap}\n![Penguin bill length versus depth by species](images/width-vs-depth.png){#fig-scatter fig-alt=\"Scatter plot of bill length vs. depth showing distinct species clustering.\"}\n```\n\nMarkdown used to include a non-computational figure.\n:::\n\n::: {#fig-figures}\n\n::: {.panel-tabset group=\"language\"}\n\n## R\n\n````{.markdown}\n```{{r}}\n#| label: fig-scatter\n#| fig-cap: \"Penguin bill length versus depth by species\"\n#| fig-alt: \"Scatter plot of bill length vs. depth showing distinct species clustering.\"\n\npenguins |>\n  ggplot(aes(x = bill_length_mm, y = bill_depth_mm)) +\n  geom_point(aes(color = species)) +\n  scale_color_manual(values = penguin_colors) +\n  labs(x = \"Bill Length (mm)\", y = \"Bill Depth (mm)\")\n\n```\n````\n\n## Python\n\n````{.markdown}\n```{{python}}\n#| label: fig-scatter\n#| fig-cap: \"Penguin bill length versus depth by species\"\n#| fig-alt: \"Scatter plot of bill length vs. depth showing distinct species clustering.\"\n\n(\n    ggplot(penguins, aes(x=\"bill_length_mm\", y=\"bill_depth_mm\"))\n    + geom_point(aes(color=\"species\"))\n    + scale_color_manual(values=penguin_colors)\n    + labs(x=\"Bill Length (mm)\", y=\"Bill Depth (mm)\")\n)\n\n```\n````\n\n:::\n\nBasic figure chunk options used for a computational figure. Compare to @lst-markdown-figure.\n\n:::\n\nThe result is shown in @fig-basic-cell-options-figure.\nThe caption here is prefaced by \"Figure 1:\" because the label started with `fig-`, the signal that this is a cross-referenceable figure. \n\n![Example output when @fig-figures is rendered](images/figure-table-basic-cell-options-figure.png){#fig-basic-cell-options-figure fig-alt=\"\"}\n\n\n\n### Fenced div syntax\n\nAlternative to setting `label` and `fig-cap`/`tbl-cap` as code cell options\nSet identifier as ID in fenced div\nUse code cell to generate table or figure\nCaption is last line in div\n\n```{.markdown}\n::: {#LABEL}\n\nCONTENT\n\nCAPTION\n\n:::\n```\n\n::: {.panel-tabset group=\"language\"}\n\n## R\n\n````{.markdown}\n::: {#fig-scatter} \n```{{r}} \n#| fig-alt: \"Scatter plot of bill length vs. depth showing distinct species clustering.\"\n\npenguins |>\n  ggplot(aes(x = bill_length_mm, y = bill_depth_mm)) +\n  geom_point(aes(color = species)) +\n  scale_color_manual(values = penguin_colors) +\n  labs(x = \"Bill Length (mm)\", y = \"Bill Depth (mm)\")\n\n```\n\nPenguin bill length versus depth by species\n\n:::\n````\n\n## Python\n\n````{.markdown}\n::: {#fig-scatter}\n```{{python}}\n#| fig-alt: \"Scatter plot of bill length vs. depth showing distinct species clustering.\"\n\n(\n    ggplot(penguins, aes(x=\"bill_length_mm\", y=\"bill_depth_mm\"))\n    + geom_point(aes(color=\"species\"))\n    + scale_color_manual(values=penguin_colors)\n    + labs(x=\"Bill Length (mm)\", y=\"Bill Depth (mm)\")\n)\n\n```\n\nPenguin bill length versus depth by species\n\n:::\n````\n\n:::\n\n\n## Captions {#sec-captions}\n\n### Caption text\n\nRefer to previous sections:\n\n* Use code cell options or last element in fenced divs to set content of captions.\n* Include dynamic content in captions by using div syntax and inline code.\n\n### Caption location {#sec-caption-location}\n\nBy default, Quarto puts figure captions at the bottom of the figure, and table captions at the top of the table.\nYou can control this with the `cap-location` option for both figures and tables, or separately with the `fig-cap-location` and `tbl-cap-location` options.\nCan take the values `top`, `bottom`, or `margin` (`margin` only in some formats).\n\nDocument level to control computational and non-computational figures and tables.\n\nCode cell level for individual figures and tables.\n\nIs there an attribute equivalent for markdown figures and tables?\n\n::: {.panel-tabset group=\"language\"}\n\n## R\n \n````{.markdown filename=\"document.qmd\"}\n```{{r}}\n#| label: tbl-species-count\n#| tbl-cap: \"Penguins sampled from the Palmer Archipelago\"\n#| cap-location: bottom\n\npenguins |>\n  count(species) |>\n  gt()\n\n``` \n````\n \n## Python\n \n````{.markdown filename=\"document.qmd\"}\n```{{python}}\n#| label: tbl-species-count\n#| tbl-cap: \"Penguins sampled from the Palmer Archipelago\"\n#| cap-location: bottom\n\n(\n  pl.DataFrame(penguins)\n .group_by('species')\n .len()\n .pipe(GT)\n)\n\n``` \n````\n \n:::\n\nFor example,\n\n::: {#fig-cap-location}\n\n:::{layout=\"[[1,1], [1]]\"}\n:::{}\n![](images/figure-table-captions-location-top.png){.border}\n\n`top`\n:::\n:::{}\n![](images/figure-table-captions-location-bottom.png){.border}\n\n`bottom`\n:::\n\n:::{}\n![](images/figure-table-captions-location-margin.png){.border}\n\n`margin`\n:::\n:::\n\nTables with the code cell option `cap-location` set to: `top`, `bottom` and `margin`.\n\n:::\n\n\n::: {#fig-cap-location-document}\n\n:::{layout-ncol=\"2\"}\n```{.yaml filename=\"document.qmd\"}\n---\ntitle: \"My Document\"\ncap-location: bottom\n---\n```\n\n```{.yaml filename=\"_quarto.yml\"}\ncap-location: bottom\n```\n:::\n\nYou can set the caption location for the entire document in the document header, or for all documents in a project using `_quarto.yml`.\n\n:::\n\n### Caption titles and numbering\n\nDocument level (or project level options)!\n\n:::{#fig-cap-title}\n\n::: {layout=\"[2, 1]\"}\n:::{}\n![](images/figure-table-caption-format.jpeg){.border width=\"50%\"}\n\nTable Caption\n:::\n\n:::{}\n![](images/figure-table-cross-reference-form.jpeg){.border width=\"50%\"}\n\nInline reference\n:::\n\n:::\n:::\n\n```{.yaml filename=\"document.qmd\"}\n---\ntitle: \"My Document\"\ncrossref:\n  tbl-title: Sheet\n  tbl-prefix: Sh\n  tbl-labels: roman\n  title-delim: \"â€”\"   \n---\n```\n\n![](images/figure-table-caption-format-edit.png)\n\nSame for `fig`: `fig-title`, `fig-prefix`, `fig-labels`\n\nShared: `title-delim`\n\n`labels`, `subref-labels`,`fig-labels`, `tbl-labels`:`arabic`, `alpha a`, `alpha A`, `roman i`, `roman I` \n\n\n```{.yaml filename=\"document.qmd\"}\n---\ntitle: \"My Document\"\ncrossref:\n  fig-title: Fig\n  fig-prefix: Fig\n  fig-labels: roman\n  title-delim: \".\"   \n---\n```\n\n## Layout {#sec-advanced-layout}\n\nUse `layout` to control arrangement.\n\nDo some examples without captions, but use fenced divs e.g.\n\n````\n::: {layout-ncol=\"2\"}\n::: {}\n| Column 1 | Column 2 | Column 3 |\n|----------|----------|----------|\n| Row 1    | Data A   | Value X  |\n| Row 2    | Data B   | Value Y  |\n| Row 3    | Data C   | Value Z  |\n:::\n\n::: {}\n| Column 1 | Column 2 | Column 3 |\n|----------|----------|----------|\n| Row 1    | Data A   | Value X  |\n| Row 2    | Data B   | Value Y  |\n| Row 3    | Data C   | Value Z  |\n:::\n:::\n````\n\nThen talk about cross-references and captions by filling in the empty `{}` divs with labels, and adding extra caption lines. \n\nTricky combo: caption but not cross referenceable. Ignore? Mention. What's the general translation for the examples we do do. \n\n### Arranging multiple tables and/or figures {#sec-multiple-outputs}\n\nQuarto provides a set of layout code cell options and attributes that allow you to arrange multiple figures or tables in a single panel.\nAs an example, `layout-ncol` specifies the number of columns in a panel layout.\nYou can use it as a code cell option:\n\n````{.markdown}\n```{{LANGUAGE}}\n#| layout-ncol: 2\n\n# CODE TO GENERATE TWO FIGURES/TABLES\n```\n````\n\nOr you can use it as an attribute in a fenced div:\n\n````{.markdown}\n::: {layout-ncol=\"2\"}\n\n```{{LANGUAGE}}\n# CODE TO GENERATE A SINGLE FIGURE OR TABLE\n```\n\n```{{LANGUAGE}}\n# CODE TO GENERATE ANOTHER FIGURE OR TABLE\n```\n:::\n\n````\n\nUsing the code cell option is the simplest approach, \nbut as soon as you want some combination of: a mix of figures and tables, \nindividual captions, to control placement on the page, or individual cross-references, we recommend using the attribute in a fenced div and nesting your code inside.\n\nIn the following sections, learn about `layout-nrow`/`layout-ncol`, and `layout`.\n\n`layout-align`/`layout-valign` \n\n\n````{.markdown}\n::: {layout-ncol=\"2\"}\n\n```{{LANGUAGE}}\n#| label: fig-1\n#| fig-cap: \"Figure 1 caption\"\n# CODE TO GENERATE A SINGLE FIGURE OR TABLE\n```\n\n```{{LANGUAGE}}\n#| label: fig-2\n# CODE TO GENERATE ANOTHER FIGURE OR TABLE\n```\n:::\n````\n\n````{.markdown}\n::: {#fig-plots}\n::::: {layout-ncol=\"2\"}\n\n```{{LANGUAGE}}\n# CODE TO GENERATE A SINGLE FIGURE OR TABLE\n```\n\n```{{LANGUAGE}}\n# CODE TO GENERATE ANOTHER FIGURE OR TABLE\n```\n:::::\n\nCAPTION\n:::\n````\n\nArranging multiple figures or tables in a single panel is a common requirement.\nYou can do this using the `layout` code cell options, or by using fenced divs with the `layout` classes. \n\nIt's possible to specify a layout of multiple figures or tables produced in a single code cell using the `layout` or `layout-ncol`/`layout-nrow` code cell options.\n\n````{.markdown}\n::: {layout-ncol=\"2\"}\n\n```{{LANGUAGE}}\n# CODE TO GENERATE A SINGLE FIGURE OR TABLE\n```\n\n```{{LANGUAGE}}\n# CODE TO GENERATE ANOTHER FIGURE OR TABLE\n```\n:::\n\n````\n\nHowever, we recommend using fenced divs instead, because they are more flexible and easier to read.\n\nCombing multiple layout classes in a single fenced div can be unpredictable.\nYou should instead nest fenced divs to create complex layouts.\n\n### Relative to page\n\nCombining column classes `column` with fenced div\n\nAvailable columns:\nhttps://quarto.org/docs/authoring/article-layout.html#available-columns\n\nVia code cell option, or fenced div attribute.\n\n## Embedding figures and tables from other documents\n\n## Interactive Components\n\nHTML formats. How are they included? `` ```{=html} `` blocks\n\n## Move somewhere else?\n\n### LaTeX specific things\n\nMove to Documents chapter: `fig-scap`, `fig-env`, `fig-pos`, \n\n## Treating as non-computational\n\nSave figures in code in as many formats as you need\nInclude via markdown explicitly leaving off extension so Quarto picks right one for format\\",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}