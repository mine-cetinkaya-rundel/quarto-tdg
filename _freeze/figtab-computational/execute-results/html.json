{
  "hash": "31dd749b42f712437424146e71780d69",
  "result": {
    "engine": "knitr",
    "markdown": "# Computational figures and tables {#sec-computational-figures-tables}\n\n\n\n\n## Overview\n\nThis chapter covers topics specific to figures and tables that are the output of executable code cells.\nProducing figures and tables with code has many advantages:\n\n- Your figures and tables are always up to date.\n- You can change labelling, styling, colors etc. right in document source.\n- Quarto handles file formats and paths, so you don't have to.\n\nYou'll start by reviewing the most common code cell options for figures and tables---those that add captions, identifiers and alternative text.\n\nThen, we split the rest of the chapter into two sections: one for figures (covering size, format, resolution, and creating multiple figures) and one for tables (covering table formats, and creating multiple tables).\n\nMuch of the control of computational figures and tables comes from code cell options.\nTo help you navigate this, and other chapters, we list the most common code cell options in @tbl-figtab-ref.\nWith one exception, we only list options common to both the `knitr` and `jupyter` engines.\nUse the [Quarto Code Cell Reference](https://quarto.org/docs/reference/cells/) for the full list of available options.\n\n\n| Option | Document Option | Description | Reference |\n|:-------|-----------------|:------------|:----------|\n|`label` | | ID for output, also used for cross-references. | @sec-figtab-basic, preface with `tbl-` or `fig-` to number and cross-reference, see @sec-figtab-crossref. |\n| `fig-cap` | | Caption for figure                          | @sec-figtab-basic. For control over appearance see @sec-figtab-captions. |\n| `tbl-cap` | | Caption for table                           | @sec-figtab-basic. For control over appearance see @sec-figtab-captions. |\n| `fig-alt` | | Alternative text description of the figure  | @sec-figtab-basic |\n| `fig-subcap` | | Sub-captions for multiple figures produced in a single code cell | @sec-multiple-figures |\n| `tbl-subcap` | | Sub-captions for multiple tables produced in a single code cell |@sec-multiple-tables  |\n| `layout-ncol`/ `layout-nrow` | | Number of columns when arranging multiple figures or tables in a single panel | For figures see @sec-multiple-figures, for tables see @sec-multiple-tables. For more complicated layouts see @sec-panel-layout. |\n| `column` / `fig-column` / `tbl-column` | | Place figure or table in a specific column relative to page | @sec-page-columns |\n| `output-location` | | Place figure or table in a specific location relative to slide | @sec-output-location. |\n| `fig-width` / `fig-height` **knitr engine only** | ☑ | Size of figure in inches | @sec-figure-size, also includes options for `jupyter` engine |\n| `fig-align`| ☑ | Alignment of figures in their surrounding container | @sec-figure-alignment |\n| `tbl-colwidths` | ☑ | Column widths for markdown tables | @sec-table-column-widths |\n| `layout` | | Layout specification when arranging multiple figures or tables in a single panel | @sec-panel-layout |\n| `layout-align` / `layout-valign` | | Alignment when arranging multiple figures or tables in a single panel | @sec-panel-layout |\n| `cap-location` / `fig-cap-location` /  `tbl-cap-location` | ☑ | Location of caption relative to figure or table | @sec-caption-location |\n\n: Commmon code cell options for figures and tables {#tbl-figtab-ref tbl-colwidths=\"[25,5,40,30]\"}\n\n### The examples in this chapter\n\nWe wanted authentic examples of figures and tables generated by code in this chapter.\nHowever, the focus of this chapter isn't on the code, and we don't want it to distract you.\nTo balance those objectives we've selected a small number of examples that we'll repeat throughout the chapter.\nThese examples are designed to be almost identical between R and Python, \nbut this means they are created with a very limited set of packages (ggplot2 and GT in R, and plotnine and great_tables in Python).\n\nWe've provided examples in both R and Python so you can reproduce them in your favorite language.\nThe concepts you are learning are language (and package) agnostic, \nso while the executable code is different,\nthe code cell options, and markdown syntax are identical.\n\nThe code to generate the example figures and tables is shown without any other context.\nIf you want to recreate them, you'll need the setup code as shown in @fig-setup.\nWe also show the rendered examples without a code echo, i.e. we set `echo: false` in our document header:\n\n```{.yaml filename=\"document.qmd\"}\n---\necho: false\n---\n```\n\n::: {#fig-setup}\n\n:::{.panel-tabset}\n\n## R\n\n````{.r filename=\"setup.R\"}\nlibrary(tidyverse)\nlibrary(gt)\nlibrary(palmerpenguins)\n\ntheme_set(theme_classic())\n\npenguin_colors <- c(\n  Adelie = \"#FF8C00\",\n  Chinstrap = \"#A020F0\",\n  Gentoo = \"#008B8B\"\n)\n\npenguins <- penguins |>\n  drop_na(bill_depth_mm)\n\n````\n\n## Python\n\n```{.python filename=\"setup.py\"}\nimport polars as pl\nfrom plotnine import *\nfrom great_tables import GT\nfrom palmerpenguins import load_penguins\n\ntheme_set(theme_classic())\n\npenguin_colors = {\n    'Adelie': '#FF8C00',\n    'Chinstrap': '#A020F0',\n    'Gentoo': '#008B8B'\n}\n\npenguins = load_penguins()\npenguins = (pl.DataFrame(penguins)\n    .drop_nulls(\"bill_depth_mm\"))\n\n```\n\n:::\n\nCode required before executing the examples in this chapter\n\n:::\n\n\n## Basics {#sec-figtab-basic}\n\nIf the output of an executable code cell is a figure or a table, Quarto will automatically include it in the rendered document.\nFor example, in @fig-figure-quick the code cell produces a figure.\n\n::: {#fig-figure-quick}\n\n::: {.panel-tabset group=\"language\"}\n\n## R\n\n````{.markdown}\nSome text before the code cell.\n\n```{{r}}\npenguins |>\n  ggplot(aes(x = bill_length_mm, y = bill_depth_mm)) +\n  geom_point(aes(color = species)) +\n  scale_color_manual(values = penguin_colors) +\n  labs(x = \"Bill Length (mm)\", y = \"Bill Depth (mm)\")\n\n```\n\nSome text after the code cell.\n````\n\n## Python\n\n````{.markdown}\nSome text before the code cell.\n\n```{{python}}\n(\n    ggplot(penguins, aes(x=\"bill_length_mm\", y=\"bill_depth_mm\"))\n    + geom_point(aes(color=\"species\"))\n    + scale_color_manual(values=penguin_colors)\n    + labs(x=\"Bill Length (mm)\", y=\"Bill Depth (mm)\")\n)\n\n```\n\nSome text after the code cell.\n````\n\n:::\n\nA document with an executable code cell that produces a figure\n\n:::\n\nWhen the document is rendered that figure appears right where the code cell was (@fig-quick-start-figure).\n\n![A rendered document with a figure produced by a code cell](images/figure-table-quick-start-figure.png){#fig-quick-start-figure .border fig-alt=\"Screenshot of Quarto HTML document with a scatterplot shown below the line of text 'Some text before the code cell' and above the line of text 'Some text after the code cell'.\"}\n\nFor non-computational figures and tables, additional context, like a caption or identifier, is added via markdown syntax.\nFor computational figures and tables, additional context is added via code cell options.\n\nThe most common options are:\n\n*  `label`: The ID for the resulting figure/table. You must omit the `#`. \n    If the label starts with `fig-` or `tbl-`, the figure or table will be numbered, and can be cross-referenced. \n\n*  `fig-cap`/`tbl-cap`: The caption for the resulting figure/table. \n    Use standard YAML syntax for long strings (@sec-yaml-long-strings) if you need to break across lines, but ensure each line starts with `#|`. (TODO: Currently not true for `jupyter` engine. Check on state of <https://github.com/quarto-dev/quarto-cli/issues/11290>)\n\n*  `fig-alt`: Alternative text for the resulting figure. There is no `tbl` equivalent, because tables are text-based and generally accessible to screen readers.\n\nFor example, @fig-figures uses the same code as @fig-figure-quick but adds an identifier, caption, and alternative text with code cell options.\n\n::: {#fig-figures}\n\n::: {.panel-tabset group=\"language\"}\n\n## R\n\n````{.markdown}\n```{{r}}\n#| label: fig-scatter\n#| fig-cap: \"Penguin bill length versus depth by species\"\n#| fig-alt: \"Scatter plot of bill length vs. depth showing distinct species clustering.\"\n\npenguins |>\n  ggplot(aes(x = bill_length_mm, y = bill_depth_mm)) +\n  geom_point(aes(color = species)) +\n  scale_color_manual(values = penguin_colors) +\n  labs(x = \"Bill Length (mm)\", y = \"Bill Depth (mm)\")\n\n```\n````\n\n## Python\n\n````{.markdown}\n```{{python}}\n#| label: fig-scatter\n#| fig-cap: \"Penguin bill length versus depth by species\"\n#| fig-alt: \"Scatter plot of bill length vs. depth showing distinct species clustering.\"\n\n(\n    ggplot(penguins, aes(x=\"bill_length_mm\", y=\"bill_depth_mm\"))\n    + geom_point(aes(color=\"species\"))\n    + scale_color_manual(values=penguin_colors)\n    + labs(x=\"Bill Length (mm)\", y=\"Bill Depth (mm)\")\n)\n\n```\n````\n\n:::\n\nBasic code cell options used to add an identifier (`label`), caption (`fig-cap`) and alternative text (`fig-alt`) to a computational figure.\n\n:::\n\nThe rendered result is shown in @fig-basic-cell-options-figure.\nThe caption here is prefaced by \"Figure 1:\" because the label started with `fig-`, the signal that this is a cross-referenceable figure. \n\n![Example output when @fig-figures is rendered](images/figure-table-basic-cell-options-figure.png){#fig-basic-cell-options-figure fig-alt=\"\"}\n\n@fig-tables demonstrates the same concept for tables.\nTo caption a table use the `tbl-cap` option, \nand start the label with `tbl-` to make it cross-referenceable.\n\n\n::: {#fig-tables}\n\n::: {.panel-tabset group=\"language\"}\n\n## R\n\n````{.markdown}\n```{{r}}\n#| label: tbl-species-count\n#| tbl-cap: \"Number of penguins sampled from each species in the Palmer Archipelago\"\n\npenguins |>\n  count(species) |>\n  gt()\n\n```\n````\n\n## Python\n\n````{.markdown}\n```{{python}}\n#| label: tbl-species-count\n#| tbl-cap: \"Number of penguins sampled from each species in the Palmer Archipelago\"\n\n(\n  pl.DataFrame(penguins)\n .group_by('species')\n .len()\n .pipe(GT)\n)\n\n```\n````\n\n:::\n\nBasic code cell options used to add an identifier (`label`) and caption (`tbl-cap`) for a computational table.\n\n:::\n\nThe result is shown in @fig-basic-cell-options-table.\nThe table caption is prefaced by \"Table 1:\" because `label` started with `tbl-`, the signal that this is a cross-referenceable table.\n\n![Example output when @fig-tables is rendered](images/figure-table-basic-cell-options-table.png){#fig-basic-cell-options-table fig-alt=\"Rendered table with caption above it 'Table 1: Number of penguins sampled from each species in the Palmer Archipelago'.\"}\n\n## Figures {#sec-figtab-figures}\n\nIn this section you'll learn about figure-specific options: **figure size**, **format and resolution**, and **alignment**. Some of these controls are *document options* (set in your document header and applied to all figures), some are *code cell options* (applied to individual code cells), and others need to be configured directly in your plotting code. We'll use *emphasis* to highlight when an option is a document-level setting versus a code cell option. \n\n### Default figure size\n\nThe *document options* `fig-width` and `fig-height` control the default size of figures produced by all the code cells in a document. \n\nHow these values are applied depends on the engine:\n\n* `knitr`: the values are passed along to the graphics device, and thus apply regardless of the package you use to create the plots.\n* `jupyter`: the values are used to set the default figure size for matplotlib. \n    Many popular plotting packages, including seaborn, depend on matplotlib, and will respect these defaults.\n    Other packages may not respect matplotlib defaults, like plotnine, but have themselves implemented something to use and respect the  environment variables Quarto sets `QUARTO_FIG_WIDTH` and `QUARTO_FIG_HEIGHT`.\n\nThe default values are format specific.\nFor example, the default figure size for `format: html` is 7x5 inches, \nwhich is different to that for `format: pdf` at 5.5x3.5 in.\n\nYou can override these defaults using `fig-width` and `fig-height` *document options*.\nFor example, @lst-fig-width-height shows how to set the default figure size to 4x6 in for `html` output.\n\n::: {#lst-fig-width-height}\n\n```{.yaml filename=\"document.qmd\"}\n---\nformat:\n  html:    \n    fig-width: 4\n    fig-height: 6\n---\n```\n\nUse the `fig-width` and `fig-height` document options to set the default figure size for a target output format.\n\n:::\n\nSet `fig-width` and `fig-height` at the top-level (i.e. not nested under a format) to apply to all formats.\nYou could also set `fig-width` and `fig-height` in `_quarto.yml` to apply to all documents in a project.\n\n### Custom figure size {#sec-figure-size}\n\nThe defaults set by the document options will apply to all code cells. \nHowever, you often want to customize figure sizes, and aspect ratios, for individual plots.\nHow you do this depends on the engine. \n\n#### `knitr`\n\nIn `knitr` use the *code cell options* `fig-width`, `fig-height`\n\n::: {#lst-figure-size}\n````{.markdown}\n```{{r}}\n#| fig-width: 4\n#| fig-height: 6\n\npenguins |>\n  ggplot(aes(x = island, fill = species)) +\n  geom_bar(position = \"stack\") +\n  scale_fill_manual(values = penguin_colors) +\n  labs(x = \"Species\", y = \"Count\")\n\n```\n````\n\nWhen using the `knitr` engine, use the code cell options `fig-width` and `fig-height` to customize figure size for individual plots.\n\n:::\n\n\n#### `jupyter` \n\nThere are no `fig-width` or `fig-height` code cell options for the `jupyter` engine.\nYou need to set the figure size in the code itself.\nThis will depend on the plotting package you are using.\n\nFor plotting packages that use matplotlib and respect its defaults, you can set figure sizes using matplotlib directly.\n\nFor example, @lst-seaborn-figure shows code to create a scatterplot of the `penguins` data using [seaborn](https://seaborn.pydata.org). \nWith no further adjustment the size of the figure will reflect the default `fig-height` and `fig-width` document options.\n\n::: {#lst-seaborn-figure}\n````markdown\n```{{python}}\nimport seaborn as sns\npenguins = sns.load_dataset(\"penguins\")\nsns.scatterplot(data=penguins, x=\"bill_length_mm\", y=\"bill_depth_mm\", hue=\"species\")\n```\n````\n\nCode to create seaborn plot of its own `penguins` data. \n\n:::\n\nTo change the size of the figure you change the matplotlib default plot size using `rcParams`. \nThis mimics the way the `jupyter` engine sets the default plot sizes and will apply to all plots created in subsequent code cells. \n\n::: {#lst-seaborn-figure-rcparams}\n````markdown\n```{{python}}\nimport matplotlib as mpl\nmpl.rcParams['figure.figsize'] = (8, 4)\n\nsns.scatterplot(data=penguins, x=\"bill_length_mm\", y=\"bill_depth_mm\", hue=\"species\")\n```\n````    \n\nUse matlplotlibs `rcParams` to change default figure size for all subsequent plots.\n\n:::\n\nAlternatively, to apply a new default for a single plot, use `rc_context` as shown in @lst-seaborn-figure-rccontext.\n\n::: {#lst-seaborn-figure-rccontext}\n\n````markdown\n```{{python}}\nimport matplotlib as mpl\nwith mpl.rc_context({'figure.figsize': (8, 4)}):\n    sns.scatterplot(data=penguins, x=\"bill_length_mm\", y=\"bill_depth_mm\", hue=\"species\")\n```\n````\n\nUse `rc_context` to create a plot with a temporary change to the matplotlib default figure size.\n\n:::\n\nFor packages that don't use matplotlib, or don't respect its defaults, you'll need to refer to their documentation for changing plot size.\nFor example, in plotnine you can resize a plot through the `theme()` function as shown in @lst-plotnine-figure-size.\n\n::: {#lst-plotnine-figure-size}\n\n````markdown\n```{{python}}\n(\n    ggplot(penguins, aes(x=\"bill_length_mm\", y=\"bill_depth_mm\"))\n    + geom_point(aes(color=\"species\"))\n    + scale_color_manual(values=penguin_colors)\n    + labs(x=\"Bill Length (mm)\", y=\"Bill Depth (mm)\")\n    + theme(figure_size=(8, 4))\n)\n```\n````\n:::\n\n### Figure format and resolution\n\nThe default image format saved by the engines differs by target format.\nFor example, for `format: html`, images will be PNG (`.png`) by default, for `format: pdf`, images will be PDF (`.pdf`) by default.\n\nYou can override these defaults using `fig-format` *document option*.\nFor example, @lst-fig-format shows how to set the default figure format to `svg` for `html` output.\n\n::: {#lst-fig-format}\n\n````{.yaml filename=\"document.qmd\"}\n---\nformat:\n  html:\n    fig-format: svg\n---\n````\n\nUse the `fig-format` document option to set the default figure format for a target output format.\n\n:::\n\nSetting `fig-format` at the top-level will apply to all output formats.\nYou can also set `fig-format`, at the top-level, or nested under a `format` in `_quarto.yml` to apply it to all documents in a project.\n\nFor raster image formats like `png` and `jpg`, you can also control the resolution of the saved image using the `fig-dpi` document option.\n\nFor example, @lst-fig-dpi shows how to set the default figure resolution to 300 dots-per-inch for `html` output.\n\n::: {#lst-fig-dpi}\n\n````{.yaml filename=\"document.qmd\"}\n---\nformat:\n  html:\n    fig-dpi: 300\n---\n````\nUse the `fig-dpi` document option to set the default figure resolution for a target output format.\nLike `fig-format` you can set this for all formats, or for all documents in a project via `_quarto.yml`.\n\n:::\n\n### Multiple figures {#sec-multiple-figures}\n\nIf your code cell produces multiple figures, you combine them into a single panel by providing individual sub-captions for each figure using the `fig-subcap` code cell option.\nFor example, @fig-multiple-figures, produces two figures in a single code cell, and thus provides an array of two values to both `fig-subcap` and `fig-alt`.\n\n::: {#fig-multiple-figures}\n\n:::{.panel-tabset group=\"language\"}\n\n## R\n \n````{.markdown}\n```{{r}}\n#| label: fig-scatter\n#| fig-cap: Physical dimensions of penguins\n#| fig-alt: \n#|   - \"Scatter plot of bill length vs. depth showing distinct species clustering.\"\n#|   - \"Scatter plot of flipper length vs. body mass showing a strong positive relationship.\"\n#| fig-subcap: \n#|   - \"Penguin bill length versus depth by species\"\n#|   - \"Penguin flipper length versus body mass by species\"\n\npenguins |>\n  ggplot(aes(x = bill_length_mm, y = bill_depth_mm)) +\n  geom_point(aes(color = species)) +\n  scale_color_manual(values = penguin_colors) +\n  labs(x = \"Bill Length (mm)\", y = \"Bill Depth (mm)\")\n\n\npenguins |>\n  ggplot(aes(x = body_mass_g, y = flipper_length_mm)) +\n  geom_point(aes(color = species)) +\n  scale_color_manual(values = penguin_colors) +\n  labs(x = \"Body Mass (g)\", y = \"Flipper Length (mm)\")\n\n````\n \n## Python\n \n````{.markdown}\n```{{python}}\n#| label: fig-scatter\n#| fig-cap: Physical dimensions of penguins\n#| fig-alt: \n#|   - \"Scatter plot of bill length vs. depth showing distinct species clustering.\"\n#|   - \"Scatter plot of flipper length vs. body mass showing a strong positive relationship.\"\n#| fig-subcap: \n#|   - \"Penguin bill length versus depth by species\"\n#|   - \"Penguin flipper length versus body mass by species\"\n\n(\n    ggplot(penguins, aes(x=\"bill_length_mm\", y=\"bill_depth_mm\"))\n    + geom_point(aes(color=\"species\"))\n    + scale_color_manual(values=penguin_colors)\n    + labs(x=\"Bill Length (mm)\", y=\"Bill Depth (mm)\")\n)\n\n\n(\n    ggplot(penguins, aes(x=\"body_mass_g\", y=\"flipper_length_mm\"))\n    + geom_point(aes(color=\"species\"))\n    + scale_color_manual(values=penguin_colors)\n    + labs(x=\"Body Mass (g)\", y=\"Flipper Length (mm)\")\n)\n\n````\n \n:::\n\nAn example of a code cell that produces two figures. Individual figure captions are provided as an array to  `fig-subcap`, and alternative text descriptions are provided as an array to `fig-alt`.\n\n:::\n\n![Result of rendering,  @fig-multiple-figures, a code cell with multiple figures.](images/figure-table-multiple-figures.png){#fig-multiple-figures-rendered fig-alt=\"Two scatterplots one above the other. Each plot has a caption prefaced by '(a)' and '(b)' respectively. The overall caption is 'Figure 1: Physical dimensions of penguins'.\"}\n\nWhen rendered, the figures are placed together in a single \"Figure\" where the overall caption is provided by `fig-cap` and prefaced by \"Figure 1:\".\nEach individual figure in the panel has its own sub-caption prefaced by \"(a)\" and \"(b)\".\nYou can cross reference the entire panel with the `label`, e.g. `@fig-scatter`, or individual figures by appending an index, e.g.  `@fig-scatter-1` and `@fig-scatter-2`.\n\nOften the use of `fig-subcap` is combined with layout options to arrange the figures in a specific way.\nFor example, the `layout-ncol` code cell option will arrange the figures in a specified number of columns. \nAdding the code cell option `layout-ncol: 2` to the above example would result in the figures laid out side-by-side rather than one above the other.\n\nUsing `fig-subcap` is a quick way to create multi-panel figures, but as soon as you want some combination of: individual captions, a mix of figures and tables, to control placement on the page, or individual cross-references, we recommend using a single code cell for each output, and using the fenced divs syntax to label, caption and arrange them. \nYou can learn more about this approach in @sec-figtab-layout.\n\n\n## Tables  {#sec-figtab-tables}\n\nIn this section you'll learn about table-specific options, in particular choosing a  **table format** and controlling things like column alignment and width\n\n### Table format\n\nWhen you produce a computational table, the engine is writing the resulting table in some plain text format.\nThe most common formats are markdown pipe tables and HTML tables.\nBoth markdown pipe tables and HTML tables are supported across all of Quarto's output formats, the choice between them often comes down to how much control you want over the appearance of the table.\n\nChoose:\n\n* **Markdown**: for simple tables that don't require any row, cell or column specific formatting. \n\n* **HTML**: for more complex tables that require row, cell or column specific styling. While HTML allows for more control over the appearance of the table, not all customization will propagate through to all target formats. The best support for HTML styling is in HTML based formats (`html`, `dashboards` and `revealjs`), and `typst`.\n\nYour package and function choices, along with your target format, determine which format is produced.\nOften the format is explicit in your code, e.g. by a call to `Markdown()` in Python.\nIf it isn't, and you aren't sure which format you have produced, check the intermediate markdown that Quarto produces after executing your code cells.\n\n#### Markdown \n\nUsing the markdown pipe syntax mimics how you might write a table out by hand in Quarto (@sec-markdown-tables). \nThere are many ways to produce a markdown table computationally, but we highlight the most general approach for each language here.\n\n##### R\n\nThe `kable()` function from the [knitr](https://yihui.org/knitr/) package produces markdown tables by default.\nSimply pass your table object to `kable()` and it will return the markdown table:\n\n````markdown\n```{{r}}\npenguins |>\n  count(species) |>\n  knitr::kable()\n\n```\n````\n\nThe intermediate markdown produced is:\n\n````markdown\n|species   |   n|\n|:---------|---:|\n|Adelie    | 151|\n|Chinstrap |  68|\n|Gentoo    | 123|\n````\n\nControl the alignment of columns (i.e. the position of the colons, `:`) with the `align` argument to `kable()`.\n\n\n##### Python\n\nThe `tabulate()` function from the [tabulate](https://github.com/astanin/python-tabulate) packages can produce markdown tables from a variety of Python data structure. \n\nA general approach to create markdown tables is:\n\n1. Convert the table to a data type tabulate supports (e.g. a `pandas.DataFrame`)\n\n2. Pass the table to `tabulate()` with `tablefmt='pipe'`\n\n3. Return the result surrounded by `Markdown()` from `IPython.display`\n\nFor example, to apply this strategy to a summary table created by Polars:\n\n````markdown\n```{{python}}\nfrom tabulate import tabulate\nfrom IPython.display import Markdown\n\nsummary_table = (\n  pl.DataFrame(penguins)\n .group_by('species')\n .len()\n)\nMarkdown(tabulate(summary_table.to_pandas(), \n  tablefmt='pipe', headers='keys', showindex=False))\n\n```\n````\n\nWhen executed, this intermediate markdown is produced:\n\n````markdown\n| species   |   len |\n|:----------|------:|\n| Gentoo    |   123 |\n| Adelie    |   151 |\n| Chinstrap |    68 |\n````\n\nControl the alignment of columns (i.e. the position of the colons, `:`)  with the `colalign` argument to `tabulate()`.\n\nWhile `tabulate()` is useful general approach you may find simpler ways for your specific situation.\nFor example, you can set the default print style for polars DataFrames to markdown pipe tables using [`polars.Config.set_tbl_formatting`](https://docs.pola.rs/api/python/stable/reference/api/polars.Config.set_tbl_formatting.html).\n\n#### HTML\n\nThe tables in @fig-tables were produced using the GT package in R and great_tables package in Python.\nBoth packages produce HTML tables by default (they can also produce LaTeX tables see @sec-tables-other-formats).\n\nFor example, Figure @lst-intermediate-markdown-table shows a simplified excerpt from the intermediate markdown for the computational table produced in @fig-tables when `format: html`.\n\n:::{#lst-intermediate-markdown-table}\n::: {.panel-tabset group=\"language\"}\n\n## R\n \n````{.markdown filename=\"document.html.md\"}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"czabgtycdf\" ...>\n<style>...</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>...</thead>\n  <tbody class=\"gt_table_body\">...</tbody>\n</table>\n</div>\n```\n\n:::\n:::\n````\n \n## Python\n \n````{.markdown filename=\"document.html.md\"}\n::: {.cell-output .cell-output-display execution_count=8}\n```{=html}\n<div id=\"jnzyjbmsji\" ...>\n<style>...</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>...</thead>\n  <tbody class=\"gt_table_body\">...</tbody>\n</table>\n</div>\n```\n::: \n````\n \n:::\n\nIntermediate markdown from the code cells in @fig-tables. The `...` indicate parts omitted for brevity.\n\n:::\n\nInside the `::: {.cell-output-display}` div, you'll notice the raw HTML block syntax `` ```{=html} ``, and the table is created with the HTML tags `<table>`, `<thead>` and `<tbody>`.\nIn other words, the code cell has produced an HTML table.\n\nWhen producing HTML tables, you'll often find the package you are using provides its own styling (i.e. inside `<style>` tags), and ways to customize styling via their own functions.\nRead the documentation for your chosen package to see how to customize the appearance of your tables.\n\n#### Other formats {#sec-tables-other-formats}\n\nThe computational engine is aware of your target format.\nThis means packages can produce tables in formats other than markdown or HTML when appropriate.\nFor example, both the GT (R) and great_tables (Python) packages will produce tables using LaTeX syntax when the target is `pdf`.\nOther packages may produce RTF tables when the target format is `docx`.\nRefer to the documentation for your chosen package to see what formats are supported.\n\n### Multiple tables {#sec-multiple-tables}\n\nIf your code cell produces more than one table,\nyou can give the tables sub-captions by providing an array to `tbl-subcap`.\n\nFor example, @fig-multiple-tables shows a code cell that produces two tables, with sub-captions provided via `tbl-subcap`.\nThe rendered output is shown in @fig-multiple-tables-rendered. \n\n::: {#fig-multiple-tables}\n\n::: {.panel-tabset group=\"language\"}\n\n## R\n \n````{.markdown}\n```{{python}}\n#| label: tbl-species-count\n#| tbl-cap: \"Number of penguins sampled from each species in the Palmer Archipelago\"\n#| tbl-subcap: \n#|   - \"Total\"\n#|   - \"By year\"\n\npenguins |>\n  count(species) |>\n  gt()\n\n\npenguins |>\n  count(species, year) |>\n  pivot_wider(names_from = year, values_from = n) |>\n  gt() |>\n  cols_label(\n    species = \"Species\"\n  )\n\n``` \n````\n \n## Python\n \n````{.markdown}\n```{{python}}\n#| label: tbl-species-count\n#| tbl-cap: \"Number of penguins sampled from each species in the Palmer Archipelago\"\n#| tbl-subcap: \n#|   - \"Total\"\n#|   - \"By year\"\n\n(\n  pl.DataFrame(penguins)\n .group_by('species')\n .len()\n .pipe(GT)\n)\n\n\n(\n  pl.DataFrame(penguins)\n .group_by(['species', 'year'])\n .count()\n .pivot(index='species', columns='year', values='count')\n .pipe(GT)\n .cols_label(\n     species=\"Species\"\n )\n)\n\n``` \n````\n \n:::\n\nAn example of a code cell that produces two tables. Individual table captions are provided as an array to  `tbl-subcap`.\n\n:::\n\n![Result of rendering,  @fig-multiple-tables, a code cell with multiple tables.](images/figure-table-multiple-tables.png){#fig-multiple-tables-rendered fig-alt=\"Two tables, one above the other. Each table has a caption prefaced by '(a)' and '(b)' respectively. The overall caption is 'Table 1: Number of penguins sampled from each species in the Palmer Archipelago'.\"}\n\nWhen rendered, the tables are placed together in a single \"Table\" where the overall caption is provided by `tbl-cap` and prefaced by \"table 1:\".\nEach individual table in the panel has its own sub-caption prefaced by \"(a)\" and \"(b)\".\nYou can cross reference the entire panel with the `label`, e.g. `@tbl-soecies-count`, or individual tables by appending an index, e.g.  `@tbl-soecies-count-1` and `@tbl-soecies-count-2`.\n\nOften the use of `tbl-subcap` is combined with layout options to arrange the tables in a specific way.\nFor example, the `layout-ncol` code cell option will arrange the tables in a specified number of columns. \nAdding the code cell option `layout-ncol: 2` to the above example would result in the tables laid out side-by-side rather than one above the other.\n\nUsing `tbl-subcap` is a quick way to create multi-panel tables, but as soon as you want some combination of: individual captions, a mix of figures and tables, to control placement on the page, or individual cross-references, we recommend using a single code cell for each output, and using the fenced divs syntax to label, caption and arrange them. \nYou can learn more about this approach in @sec-figtab-layout.\n\n## Troubleshooting {#sec-figtab-troubleshooting}\n\nIt's useful to think about the process of getting your figures/tables into the rendered document in three steps:\n\n1. Execution of the code in your code cell that produces your figure/table.\n\n2. Translation of the code cell output into markdown, including saving the image file in the case of figures.\n\n3. Rendering of the markdown to include the figure/table in the final output format.\n\nTo troubleshoot a computational figure or table that doesn't come out looking right, we suggest troubleshooting each of these steps in turn.\nThe following sections provide some tips for doing this.\n\n### Execute your code interactively \n\nExecute the code cell interactively in your computational environment.\nBe careful to ensure your local computational environment (interpreter versions and package versions) matche those used by Quarto. \nCheck the figure or table looks like you expect. \nIf it doesn't, you need to fix your code based on the documentation for the packages you are using.\n\n### Examine intermediate markdown\n\nThe execution engine translates the output of your code cell into markdown.\nA good way to see what it has done is to examine the intermediate markdown after the engine has finished.\nSet `keep-md: true` in your document header:\n\n```{.yaml filename=\"document.qmd\"}\n---\ntitle: My Document\nkeep-md: true\n---\n```\n\nRender your document, and then open the generated markdown file, `{filename}.{format}.md` file.\nFind the relevant figure or table (e.g. by searching for its `label`) and examine it carefully.\nWhen examining the intermediate markdown ask yourself:\n\n* Is the format of the figure or table what you expect? \n\n* Is the content of the figure or table what you expect? Compare to the result of evaluating your code cells locally. For figures, use the image path in the markdown to find the image file in the `{filename}_files/figure-{format}/` folder, and open it directly. For tables, you'll need to rely on examing the HTML or markdown syntax.\n\n* Is the surrounding markdown what you expect? For example, are the attributes present on the figure or table markdown? Are the correct classes on the surrounding fenced divs?\n\nTracking down problems here is tricky because they could be coming from the packages you are using, the engine, or the interaction between the two. \nHere are some strategies to help you isolate the source of the problem.\n\n#### Explore package options\n\nSome packages are Quarto (or `knitr`/`jupyter`) aware, and will adjust their output based on the context of your document.\nOther packages may not be Quarto aware but will provide options that may force a format, or omit extranuous markup.\nCheck the documentation for your chosen package to see if/how it supports Quarto, and what options are available.\n\n#### Separate code from markdown\n\nSome code options, like `column` and the `layout*` options, \ndon't have an impact on how your code produces your figures and tables, \nbut instead on the markdown that surrounds them in the document.\n\nIf you are using these options,\na good first step is to pull apart the layout from the code that produces the figure or table.\n\nRemove the layout options entirely, and check the tables and figures themselves look right.\nThen, introduce the layout back in, but use the fenced div approach (as outlined in @sec-layout), rather than the code cell options.\n\n#### Do the translation yourself \n\nIf you can't figure out why you aren't getting the right markdown, you can consider doing the translation yourself.\nInstead of your code cell producing a figure or table, have it produce the markdown to include the figure or table.\n\nYou'll need to set the code cell option `output: asis` to tell Quarto not to further process the output of your code cell.\nThen write code to output text that is the markdown to include your figure or table.\nFor figures, you will need to save the image file with code, you will be responsible for setting the format, size, and path.\n\nFor example, if your code saves an image to a path defined in `image_path`, @fig-translate-yourself shows how to produce the markdown to include it.\n\n::: {#fig-translate-yourself}\n\n::: {.panel-tabset group=\"language\"}\n\n## R\n \n````{.markdown}\n```{{r}}\n#| echo: false\n#| output: asis\n\ncat(paste0(\"![Caption](\", image_path, \"){#fig-plot1 fig-alt='Alt text'}\\n\"))\n```\n````\n \n## Python\n \n````{.markdown}\n```{{python}}\n#| echo: false\n#| output: asis\n\nprint(f\"![Caption]({image_path}){{#fig-plot1 fig-alt='Alt text'}}\\n\")\n```\n````\n \n:::\n\nCode cells that produce markdown to include a figure saved in the path defined in `image_path`.\n:::\n\n### Compare to a non-computational outputs\n\nIf you see no problems with your intermediate markdown, you should be able to reproduce your problem with a non-computational example.\nReplace your executable code cells with markdown equivalents.\nFor example, save your figure as an image file, and include it with standard markdown image syntax.\n\nYou can use your intermediate markdown as a guide, but simplify as much as you can, while still reproducing your problem.\nYou have now elimated the computational environment as a source of the problem, so it's possibly a Quarto problem.\nIt's time to ask for help, see @sec-ask-for-help.\n\n\n## To be covered somewhere else\n\n* Interactive figures/tables\n\n* Embedding figures/tables from other documents",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}